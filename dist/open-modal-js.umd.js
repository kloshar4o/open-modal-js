var H=Object.defineProperty;var P=(t,o,s)=>o in t?H(t,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[o]=s;var u=(t,o,s)=>(P(t,typeof o!="symbol"?o+"":o,s),s),k=(t,o,s)=>{if(!o.has(t))throw TypeError("Cannot "+s)};var l=(t,o,s)=>(k(t,o,"read from private field"),s?s.call(t):o.get(t)),m=(t,o,s)=>{if(o.has(t))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(t):o.set(t,s)},E=(t,o,s,p)=>(k(t,o,"write to private field"),p?p.call(t,s):o.set(t,s),s);var b=(t,o,s)=>(k(t,o,"access private method"),s);(function(t,o){typeof exports=="object"&&typeof module!="undefined"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(t=typeof globalThis!="undefined"?globalThis:t||self,o(t.OpenModalJs={}))})(this,function(t){var r,v,O,f,S,i;"use strict";class o{constructor(e,n={},d={}){m(this,r,void 0);u(this,"modalId");u(this,"callback");u(this,"config");this.modalId=e,E(this,r,{isOpen:!1}),this.callback=d,this.config={openClass:n.overlayClass||"open",closeButtonClass:n.closeButtonClass||"modal-close",overlayClass:n.overlayClass||"modal-overlay",openOnInit:n.openOnInit||!1},this.config.openOnInit&&this.openModal()}get isOpen(){return l(this,r).isOpen}set isOpen(e){e?this.openModal():this.closeModal()}get element(){return document.getElementById(this.modalId)}closeModal(){const e=this.element;if(!e||!this.config.openClass)return;e.classList.remove(this.config.openClass),l(this,r).isOpen=!1;const n={detail:this},d=()=>{e.removeEventListener("transitionstart",d),document.dispatchEvent(new CustomEvent("closing:modal",n)),this.callback.onClosing&&this.callback.onClosing(this)},a=()=>{e.removeEventListener("transitionend",a),e.removeEventListener("transitioncancel",a),document.dispatchEvent(new CustomEvent("closed:modal",n)),this.callback.onClosed&&this.callback.onClosed(this)};e.addEventListener("transitionstart",d,{once:!0}),e.addEventListener("transitioncancel",a,{once:!0}),e.addEventListener("transitionend",a,{once:!0}),getComputedStyle(e).transitionDuration==="0s"&&(d(),a())}openModal(){const e=this.element;if(!e||!this.config.openClass)return;e.classList.add(this.config.openClass),l(this,r).isOpen=!0;const n={detail:this},d=()=>{e.removeEventListener("transitionstart",d),document.dispatchEvent(new CustomEvent("opening:modal",n)),this.callback.onOpening&&this.callback.onOpening(this)},a=()=>{e.removeEventListener("transitionend",a),e.removeEventListener("transitioncancel",a),document.dispatchEvent(new CustomEvent("opened:modal",n)),this.callback.onOpened&&this.callback.onOpened(this)};e.addEventListener("transitionstart",d,{once:!0}),e.addEventListener("transitioncancel",a,{once:!0}),e.addEventListener("transitionend",a,{once:!0}),getComputedStyle(e).transitionDuration==="0s"&&(a(),d())}}r=new WeakMap;class s{constructor(){m(this,v);m(this,f);u(this,"modals");u(this,"eventHandler");this.modals=new Set,this.eventHandler=b(this,v,O).bind(this)}addModalToHandler(e){this.modals.add(e)}}v=new WeakSet,O=function(e){!this.modals.size||b(this,f,S).call(this,e.target)},f=new WeakSet,S=function(e){let n=null;for(const d of this.modals){const a=d.element;if(!a||!a.contains(e))continue;const{overlayClass:y,closeButtonClass:C}=d.config,c=C&&e.classList.contains(C),g=y&&e.classList.contains(y);(c||g)&&(n=d)}n&&n.closeModal()};class p{constructor(){m(this,i,void 0);E(this,i,{openModals:new Set,locked:!1,savedPosition:{X:0,Y:0},lockBodyStyles:{overflow:"",position:"",height:"",width:"",left:"",top:""}})}get locked(){return l(this,i).locked}lock(e){if(l(this,i).openModals.add(e),this.locked)return;l(this,i).locked=!0,l(this,i).savedPosition.Y=window.scrollY,l(this,i).savedPosition.X=window.scrollX;const n=window.getComputedStyle(document.body),d=parseInt(n.top)||0,a=parseInt(n.left)||0,y=l(this,i).savedPosition.Y-d,C=l(this,i).savedPosition.X-a,{lockBodyStyles:c}=l(this,i);c.top=`-${y}px`,c.left=`-${C}px`,c.width=n.width,c.height=n.height,c.position="fixed",c.overflow="hidden";for(const[g,B]of Object.entries(c))document.body.style.setProperty(g,B)}unlock(e){if(l(this,i).openModals.delete(e),!l(this,i).openModals.size){for(const n in l(this,i).lockBodyStyles)document.body.style.removeProperty(n);window.scrollTo(l(this,i).savedPosition.X,l(this,i).savedPosition.Y),l(this,i).locked=!1}}}i=new WeakMap;const w=new s,L=new p;document.addEventListener("opening:modal",h=>{L.lock(h.detail)}),document.addEventListener("closed:modal",h=>{L.unlock(h.detail)}),document.addEventListener("DOMContentLoaded",()=>{document.body.addEventListener("click",w.eventHandler)});class M extends o{constructor(e,n,d){super(e,n,d),w.addModalToHandler(this)}}window.OpenModalJs=M,t.BodyClick=s,t.BodyScroll=p,t.ModalController=o,t.default=M,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
